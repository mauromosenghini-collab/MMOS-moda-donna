{% extends "base.html" %}
{% load static %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6">
        {% if product.image %}
            <img src="{{ product.image.url }}" class="img-fluid rounded shadow" alt="{{ product.name }}">
        {% else %}
            <div class="bg-secondary d-flex align-items-center justify-content-center rounded shadow" style="height: 400px;">
                <i class="bi bi-image text-white" style="font-size: 5rem;"></i>
            </div>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h1>{{ product.name }}</h1>
        <p class="text-muted">{{ product.category.name }}</p>
        <hr>
        <p class="fs-4">
            <strong class="text-primary">{{ product.price }} â‚¬</strong>
        </p>
        <p>{{ product.description }}</p>
        
        {% if product.available and product.stock > 0 %}
            <p class="text-success">
                <i class="bi bi-check-circle"></i> Disponibile ({{ product.stock }} pezzi)
            </p>
            <form action="{% url 'shop:cart_add' product.id %}" method="post">
                {% csrf_token %}
                {{ cart_product_form.as_p }}
                <button type="submit" class="btn btn-primary btn-lg mt-3">
                    <i class="bi bi-cart-plus"></i> Aggiungi al carrello
                </button>
            </form>
        {% else %}
            <p class="text-danger">
                <i class="bi bi-x-circle"></i> Non disponibile
            </p>
            <button class="btn btn-secondary btn-lg" disabled>
                Prodotto non disponibile
            </button>
        {% endif %}
        
        <hr>
        <a href="{% url 'shop:product_list' %}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Torna ai prodotti
        </a>
    </div>
</div>
{% endblock %}
